serpent = require("serpent")lgi = require ('lgi')redis = require('redis')database = Redis.connect('127.0.0.1', 6379)notify = lgi.require('Notify')notify.init ("Telegram updates")chats = {}day = 86400bot_id = 196913743 -- Your Bot USER_IDsudo_users = {56693692,000000000--[[YOUE ID :|]]}Â  -----------------------------------------------------------------------------------------------Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  -- start functions --Â  -----------------------------------------------------------------------------------------------function is_sudo(msg)Â  local var = falseÂ  for k,v in pairs(sudo_users) doÂ Â Â  if msg.sender_user_id_ == v thenÂ Â Â Â Â  var = trueÂ Â Â  endÂ  endÂ  return varend-----------------------------------------------------------------------------------------------function is_admin(user_id)Â Â Â  local var = falseÂ local hashs =Â  'bot:admins:'Â Â Â  local admin = database:sismember(hashs, user_id)Â  if admin thenÂ Â Â Â  var = trueÂ  endÂ  for k,v in pairs(sudo_users) doÂ Â Â  if user_id == v thenÂ Â Â Â Â  var = trueÂ Â Â  endÂ  endÂ Â Â  return varend-----------------------------------------------------------------------------------------------function is_vip_group(gp_id)Â Â Â  local var = falseÂ local hashs =Â  'bot:vipgp:'Â Â Â  local vip = database:sismember(hashs, gp_id)Â  if vip thenÂ Â Â Â  var = trueÂ  endÂ Â Â  return varend-----------------------------------------------------------------------------------------------function is_owner(user_id, chat_id)Â Â Â  local var = falseÂ Â Â  local hash =Â  'bot:owners:'..chat_idÂ Â Â  local owner = database:sismember(hash, user_id)Â local hashs =Â  'bot:admins:'Â Â Â  local admin = database:sismember(hashs, user_id)Â  if owner thenÂ Â Â Â  var = trueÂ  endÂ  if admin thenÂ Â Â Â  var = trueÂ  endÂ Â Â  for k,v in pairs(sudo_users) doÂ Â Â  if user_id == v thenÂ Â Â Â Â  var = trueÂ Â Â  endÂ endÂ Â Â  return varend-----------------------------------------------------------------------------------------------function is_mod(user_id, chat_id)Â Â Â  local var = falseÂ Â Â  local hash =Â  'bot:mods:'..chat_idÂ Â Â  local mod = database:sismember(hash, user_id)Â local hashs =Â  'bot:admins:'Â Â Â  local admin = database:sismember(hashs, user_id)Â local hashss =Â  'bot:owners:'..chat_idÂ Â Â  local owner = database:sismember(hashss, user_id)Â  if mod thenÂ Â Â Â  var = trueÂ  endÂ  if owner thenÂ Â Â Â  var = trueÂ  endÂ  if admin thenÂ Â Â Â  var = trueÂ  endÂ Â Â  for k,v in pairs(sudo_users) doÂ Â Â  if user_id == v thenÂ Â Â Â Â  var = trueÂ Â Â  endÂ endÂ Â Â  return varend-----------------------------------------------------------------------------------------------function is_banned(user_id, chat_id)Â Â Â  local var = falseÂ local hash = 'bot:banned:'..chat_idÂ Â Â  local banned = database:sismember(hash, user_id)Â  if banned thenÂ Â Â Â  var = trueÂ  endÂ Â Â  return varend-----------------------------------------------------------------------------------------------function is_muted(user_id, chat_id)Â Â Â  local var = falseÂ local hash = 'bot:muted:'..chat_idÂ Â Â  local banned = database:sismember(hash, user_id)Â  if banned thenÂ Â Â Â  var = trueÂ  endÂ Â Â  return varend-----------------------------------------------------------------------------------------------function is_gbanned(user_id)Â Â Â  local var = falseÂ local hash = 'bot:gbanned:'Â Â Â  local banned = database:sismember(hash, user_id)Â  if banned thenÂ Â Â Â  var = trueÂ  endÂ Â Â  return varend-----------------------------------------------------------------------------------------------function resolve_username(username,cb)Â  tdcli_function ({Â Â Â  ID = "SearchPublicChat",Â Â Â  username_ = usernameÂ  }, cb, nil)endÂ  -----------------------------------------------------------------------------------------------function changeChatMemberStatus(chat_id, user_id, status)Â  tdcli_function ({Â Â Â  ID = "ChangeChatMemberStatus",Â Â Â  chat_id_ = chat_id,Â Â Â  user_id_ = user_id,Â Â Â  status_ = {Â Â Â Â Â  ID = "ChatMemberStatus" .. statusÂ Â Â  },Â  }, dl_cb, nil)endÂ  -----------------------------------------------------------------------------------------------function getInputFile(file)Â  if file:match('/') thenÂ Â Â  infile = {ID = "InputFileLocal", path_ = file}Â  elseif file:match('^%d+$') thenÂ Â Â  infile = {ID = "InputFileId", id_ = file}Â  elseÂ Â Â  infile = {ID = "InputFilePersistentId", persistent_id_ = file}Â  endÂ  return infileendÂ  -----------------------------------------------------------------------------------------------function getChatId(id)Â  local chat = {}Â  local id = tostring(id)Â  Â  if id:match('^-100') thenÂ Â Â  local channel_id = id:gsub('-100', '')Â Â Â  chat = {ID = channel_id, type = 'channel'}Â  elseÂ Â Â  local group_id = id:gsub('-', '')Â Â Â  chat = {ID = group_id, type = 'group'}Â  endÂ  Â  return chatendÂ  -----------------------------------------------------------------------------------------------function chat_leave(chat_id, user_id)Â  changeChatMemberStatus(chat_id, user_id, "Left")endÂ  -----------------------------------------------------------------------------------------------function chat_kick(chat_id, user_id)Â  changeChatMemberStatus(chat_id, user_id, "Kicked")endÂ  -----------------------------------------------------------------------------------------------function do_notify (user, msg)Â  local n = notify.Notification.new(user, msg)Â  n:show ()endÂ  -----------------------------------------------------------------------------------------------local function getParseMode(parse_mode)Â  Â  if parse_mode thenÂ Â Â  local mode = parse_mode:lower()Â  Â Â Â  if mode == 'markdown' or mode == 'md' thenÂ Â Â Â Â  P = {ID = "TextParseModeMarkdown"}Â Â Â  elseif mode == 'html' thenÂ Â Â Â Â  P = {ID = "TextParseModeHTML"}Â Â Â  endÂ  endÂ  return PendÂ  -----------------------------------------------------------------------------------------------local function getMessage(chat_id, message_id,cb)Â  tdcli_function ({Â Â Â  ID = "GetMessage",Â Â Â  chat_id_ = chat_id,Â Â Â  message_id_ = message_idÂ  }, cb, nil)end-----------------------------------------------------------------------------------------------function sendPhoto(chat_id, reply_to_message_id, disable_notification, from_background, reply_markup, photo, caption)Â  tdcli_function ({Â Â Â  ID = "SendMessage",Â Â Â  chat_id_ = chat_id,Â Â Â  reply_to_message_id_ = reply_to_message_id,Â Â Â  disable_notification_ = disable_notification,Â Â Â  from_background_ = from_background,Â Â Â  reply_markup_ = reply_markup,Â Â Â  input_message_content_ = {Â Â Â Â Â  ID = "InputMessagePhoto",Â Â Â Â Â  photo_ = getInputFile(photo),Â Â Â Â Â  added_sticker_file_ids_ = {},Â Â Â Â Â  width_ = 0,Â Â Â Â Â  height_ = 0,Â Â Â Â Â  caption_ = captionÂ Â Â  },Â  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function getUserFull(user_id,cb)Â  tdcli_function ({Â Â Â  ID = "GetUserFull",Â Â Â  user_id_ = user_idÂ  }, cb, nil)end-----------------------------------------------------------------------------------------------function vardump(value)Â  print(serpent.block(value, {comment=false}))end-----------------------------------------------------------------------------------------------function dl_cb(arg, data)end-----------------------------------------------------------------------------------------------local function send(chat_id, reply_to_message_id, disable_notification, text, disable_web_page_preview, parse_mode)Â  local TextParseMode = getParseMode(parse_mode)Â  Â  tdcli_function ({Â Â Â  ID = "SendMessage",Â Â Â  chat_id_ = chat_id,Â Â Â  reply_to_message_id_ = reply_to_message_id,Â Â Â  disable_notification_ = disable_notification,Â Â Â  from_background_ = 1,Â Â Â  reply_markup_ = nil,Â Â Â  input_message_content_ = {Â Â Â Â Â  ID = "InputMessageText",Â Â Â Â Â  text_ = text,Â Â Â Â Â  disable_web_page_preview_ = disable_web_page_preview,Â Â Â Â Â  clear_draft_ = 0,Â Â Â Â Â  entities_ = {},Â Â Â Â Â  parse_mode_ = TextParseMode,Â Â Â  },Â  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function changetitle(chat_id, title)Â  tdcli_function ({Â Â Â  ID = "ChangeChatTitle",Â Â Â  chat_id_ = chat_id,Â Â Â  title_ = titleÂ  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function edit(chat_id, message_id, reply_markup, text, disable_web_page_preview, parse_mode)Â  local TextParseMode = getParseMode(parse_mode)Â  tdcli_function ({Â Â Â  ID = "EditMessageText",Â Â Â  chat_id_ = chat_id,Â Â Â  message_id_ = message_id,Â Â Â  reply_markup_ = reply_markup,Â Â Â  input_message_content_ = {Â Â Â Â Â  ID = "InputMessageText",Â Â Â Â Â  text_ = text,Â Â Â Â Â  disable_web_page_preview_ = disable_web_page_preview,Â Â Â Â Â  clear_draft_ = 0,Â Â Â Â Â  entities_ = {},Â Â Â Â Â  parse_mode_ = TextParseMode,Â Â Â  },Â  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function setphoto(chat_id, photo)Â  tdcli_function ({Â Â Â  ID = "ChangeChatPhoto",Â Â Â  chat_id_ = chat_id,Â Â Â  photo_ = getInputFile(photo)Â  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function add_user(chat_id, user_id, forward_limit)Â  tdcli_function ({Â Â Â  ID = "AddChatMember",Â Â Â  chat_id_ = chat_id,Â Â Â  user_id_ = user_id,Â Â Â  forward_limit_ = forward_limit or 50Â  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function unpinmsg(channel_id)Â  tdcli_function ({Â Â Â  ID = "UnpinChannelMessage",Â Â Â  channel_id_ = getChatId(channel_id).IDÂ  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------local function blockUser(user_id)Â  tdcli_function ({Â Â Â  ID = "BlockUser",Â Â Â  user_id_ = user_idÂ  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------local function unblockUser(user_id)Â  tdcli_function ({Â Â Â  ID = "UnblockUser",Â Â Â  user_id_ = user_idÂ  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------local function getBlockedUsers(offset, limit)Â  tdcli_function ({Â Â Â  ID = "GetBlockedUsers",Â Â Â  offset_ = offset,Â Â Â  limit_ = limitÂ  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function delete_msg(chatid,mid)Â  tdcli_function ({Â  ID="DeleteMessages", Â  chat_id_=chatid, Â  message_ids_=midÂ  },Â  dl_cb, nil)end-----------------------------------------------------------------------------------------------function chat_del_user(chat_id, user_id)Â  changeChatMemberStatus(chat_id, user_id, 'Editor')end-----------------------------------------------------------------------------------------------function getChannelMembers(channel_id, offset, filter, limit)Â  if not limit or limit > 200 thenÂ Â Â  limit = 200Â  endÂ  tdcli_function ({Â Â Â  ID = "GetChannelMembers",Â Â Â  channel_id_ = getChatId(channel_id).ID,Â Â Â  filter_ = {Â Â Â Â Â  ID = "ChannelMembers" .. filterÂ Â Â  },Â Â Â  offset_ = offset,Â Â Â  limit_ = limitÂ  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function getChannelFull(channel_id)Â  tdcli_function ({Â Â Â  ID = "GetChannelFull",Â Â Â  channel_id_ = getChatId(channel_id).IDÂ  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------local function getInputMessageContent(file, filetype, caption)Â  if file:match('/') thenÂ Â Â  infile = {ID = "InputFileLocal", path_ = file}Â  elseif file:match('^%d+$') thenÂ Â Â  infile = {ID = "InputFileId", id_ = file}Â  elseÂ Â Â  infile = {ID = "InputFilePersistentId", persistent_id_ = file}Â  endÂ  local inmsg = {}Â  local filetype = filetype:lower()Â  if filetype == 'animation' thenÂ Â Â  inmsg = {ID = "InputMessageAnimation", animation_ = infile, caption_ = caption}Â  elseif filetype == 'audio' thenÂ Â Â  inmsg = {ID = "InputMessageAudio", audio_ = infile, caption_ = caption}Â  elseif filetype == 'document' thenÂ Â Â  inmsg = {ID = "InputMessageDocument", document_ = infile, caption_ = caption}Â  elseif filetype == 'photo' thenÂ Â Â  inmsg = {ID = "InputMessagePhoto", photo_ = infile, caption_ = caption}Â  elseif filetype == 'sticker' thenÂ Â Â  inmsg = {ID = "InputMessageSticker", sticker_ = infile, caption_ = caption}Â  elseif filetype == 'video' thenÂ Â Â  inmsg = {ID = "InputMessageVideo", video_ = infile, caption_ = caption}Â  elseif filetype == 'voice' thenÂ Â Â  inmsg = {ID = "InputMessageVoice", voice_ = infile, caption_ = caption}Â  endÂ  return inmsgend-----------------------------------------------------------------------------------------------function send_file(chat_id, type, file, caption,wtf)local mame = (wtf or 0)Â  tdcli_function ({Â Â Â  ID = "SendMessage",Â Â Â  chat_id_ = chat_id,Â Â Â  reply_to_message_id_ = mame,Â Â Â  disable_notification_ = 0,Â Â Â  from_background_ = 1,Â Â Â  reply_markup_ = nil,Â Â Â  input_message_content_ = getInputMessageContent(file, type, caption),Â  }, dl_cb, nil)end-----------------------------------------------------------------------------------------------function getUser(user_id, cb)Â  tdcli_function ({Â Â Â  ID = "GetUser",Â Â Â  user_id_ = user_idÂ  }, cb, nil)end-----------------------------------------------------------------------------------------------function pin(channel_id, message_id, disable_notification) Â Â  tdcli_function ({ Â Â Â Â  ID = "PinChannelMessage", Â Â Â Â  channel_id_ = getChatId(channel_id).ID, Â Â Â Â  message_id_ = message_id, Â Â Â Â  disable_notification_ = disable_notification Â Â  }, dl_cb, nil) end -----------------------------------------------------------------------------------------------function tdcli_update_callback(data)Â -------------------------------------------Â  if (data.ID == "UpdateNewMessage") thenÂ Â Â  local msg = data.message_Â Â Â  --vardump(data)Â Â Â  local d = data.disable_notification_Â Â Â  local chat = chats[msg.chat_id_]Â -------------------------------------------Â if msg.date_ < (os.time() - 30) thenÂ Â Â Â Â Â  return falseÂ Â Â  endÂ -------------------------------------------Â if not database:get("bot:enable:"..msg.chat_id_) and not is_admin(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â  return falseÂ Â Â  endÂ Â Â  -------------------------------------------Â Â Â Â Â  if msg and msg.send_state_.ID == "MessageIsSuccessfullySent" thenÂ Â  --vardump(msg)Â Â Â  function get_mymsg_contact(extra, result, success)Â Â Â Â Â Â Â Â Â Â Â Â  --vardump(result)Â Â Â Â Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,get_mymsg_contact)Â Â Â Â Â Â Â Â  return false Â Â Â Â Â  endÂ Â Â  --------- ANTI FLOOD -------------------Â local hash = 'flood:max:'..msg.chat_id_Â Â Â  if not database:get(hash) thenÂ Â Â Â Â Â Â  floodMax = 5Â Â Â  elseÂ Â Â Â Â Â Â  floodMax = tonumber(database:get(hash))Â Â Â  endÂ Â Â  local hash = 'flood:time:'..msg.chat_id_Â Â Â  if not database:get(hash) thenÂ Â Â Â Â Â Â  floodTime = 3Â Â Â  elseÂ Â Â Â Â Â Â  floodTime = tonumber(database:get(hash))Â Â Â  endÂ Â Â  if not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â  local hashse = 'anti-flood:'..msg.chat_id_Â Â Â Â Â Â Â  if not database:get(hashse) thenÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local hash = 'flood:'..msg.sender_user_id_..':'..msg.chat_id_..':msg-num'Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local msgs = tonumber(database:get(hash) or 0)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if msgs > (floodMax - 1) thenÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local user = msg.sender_user_id_Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local channel = msg.chat_id_Â Â Â Â Â Â  local user_id = msg.sender_user_id_Â Â Â Â Â Â  local banned = is_banned(user_id, msg.chat_id_)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if banned thenÂ Â Â Â Â Â local id = msg.id_Â Â Â Â Â Â Â  Â Â Â Â local msgs = {[0] = id}Â Â Â Â Â Â  Â Â Â Â Â local chat = msg.chat_id_Â Â Â Â Â Â  Â Â Â Â Â Â Â Â Â Â Â Â  del_all_msgs(msg.chat_id_, msg.sender_user_id_)Â Â Â Â Â Â Â Â Â  elseÂ Â Â Â Â Â  local id = msg.id_Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  chat_kick(msg.chat_id_, msg.sender_user_id_)Â Â Â Â Â Â  del_all_msgs(msg.chat_id_, msg.sender_user_id_)Â Â Â Â Â Â user_id = msg.sender_user_id_Â Â Â Â Â Â local bhash =Â  'bot:banned:'..msg.chat_id_Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  database:sadd(bhash, user_id)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> _ID_Â  *('..msg.sender_user_id_..')* \n_Spamming Not Allowed Here._\n`Spammer Banned!!`', 1, 'md')Â Â Â Â Â Â  endÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  endÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  database:setex(hash, floodTime, msgs+1)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  endÂ Â Â Â Â Â Â  endÂ endÂ -------------------------------------------Â database:incr("bot:allmsgs")Â if msg.chat_id_ thenÂ Â Â Â Â  local id = tostring(msg.chat_id_)Â Â Â Â Â  if id:match('-100(%d+)') thenÂ Â Â Â Â Â Â  if not database:sismember("bot:groups",msg.chat_id_) thenÂ Â Â Â Â Â Â Â Â Â Â  database:sadd("bot:groups",msg.chat_id_)Â Â Â Â Â Â Â  endÂ Â Â Â Â Â Â  elseif id:match('^(%d+)') thenÂ Â Â Â Â Â Â  if not database:sismember("bot:userss",msg.chat_id_) thenÂ Â Â Â Â Â Â Â Â Â Â  database:sadd("bot:userss",msg.chat_id_)Â Â Â Â Â Â Â  endÂ Â Â Â Â Â Â  elseÂ Â Â Â Â Â Â  if not database:sismember("bot:groups",msg.chat_id_) thenÂ Â Â Â Â Â Â Â Â Â Â  database:sadd("bot:groups",msg.chat_id_)Â Â Â Â Â Â Â  endÂ Â Â Â  endÂ Â Â  endÂ -------------------------------------------Â Â Â  -------------* MSG TYPES *-----------------Â Â  if msg.content_ thenÂ Â  Â if msg.reply_markup_ andÂ  msg.reply_markup_.ID == "ReplyMarkupInlineKeyboard" thenÂ Â print("INLINE KEYBOARD DETECTED!!")Â msg_type = 'MSG:Inline'Â -------------------------Â Â Â  elseif msg.content_.ID == "MessageText" thenÂ text = msg.content_.text_Â Â print("TEXT MSG DETECTED!!")Â msg_type = 'MSG:Text'Â -------------------------Â elseif msg.content_.ID == "MessagePhoto" thenÂ print("PHOTO DETECTED!!")Â if msg.content_.caption_ thenÂ caption_text = msg.content_.caption_Â endÂ msg_type = 'MSG:Photo'Â -------------------------Â elseif msg.content_.ID == "MessageChatAddMembers" thenÂ print("NEW ADD DETECTED!!")Â msg_type = 'MSG:NewUserAdd'Â -------------------------Â elseif msg.content_.ID == "MessageChatJoinByLink" thenÂ Â print("NEW JOIN DETECTED!!")Â msg_type = 'MSG:NewUserLink'Â -------------------------Â elseif msg.content_.ID == "MessageSticker" thenÂ Â print("STICKER DETECTED!!")Â msg_type = 'MSG:Sticker'Â -------------------------Â elseif msg.content_.ID == "MessageAudio" thenÂ Â print("MUSIC DETECTED!!")Â if msg.content_.caption_ thenÂ caption_text = msg.content_.caption_Â endÂ msg_type = 'MSG:Audio'Â -------------------------Â elseif msg.content_.ID == "MessageVoice" thenÂ Â print("VOICE DETECTED!!")Â if msg.content_.caption_ thenÂ caption_text = msg.content_.caption_Â endÂ msg_type = 'MSG:Voice'Â -------------------------Â elseif msg.content_.ID == "MessageVideo" thenÂ Â print("VIDEO DETECTED!!")Â if msg.content_.caption_ thenÂ caption_text = msg.content_.caption_Â endÂ msg_type = 'MSG:Video'Â -------------------------Â elseif msg.content_.ID == "MessageAnimation" thenÂ Â print("GIF DETECTED!!")Â if msg.content_.caption_ thenÂ caption_text = msg.content_.caption_Â endÂ msg_type = 'MSG:Gif'Â -------------------------Â elseif msg.content_.ID == "MessageLocation" thenÂ Â print("LOCATION DETECTED!!")Â if msg.content_.caption_ thenÂ caption_text = msg.content_.caption_Â endÂ msg_type = 'MSG:Location'Â -------------------------Â elseif msg.content_.ID == "MessageChatJoinByLink" or msg.content_.ID == "MessageChatAddMembers" thenÂ msg_type = 'MSG:NewUser'Â -------------------------Â elseif msg.content_.ID == "MessageContact" thenÂ Â print("CONTACT DETECTED!!")Â if msg.content_.caption_ thenÂ caption_text = msg.content_.caption_Â endÂ msg_type = 'MSG:Contact'Â -------------------------Â endÂ Â  endÂ Â Â  -------------------------------------------Â Â Â  -------------------------------------------Â Â Â  if ((not d) and chat) thenÂ Â Â Â Â  if msg.content_.ID == "MessageText" thenÂ Â Â Â Â Â Â  do_notify (chat.title_, msg.content_.text_)Â Â Â Â Â  elseÂ Â Â Â Â Â Â  do_notify (chat.title_, msg.content_.ID)Â Â Â Â Â  endÂ Â Â  endÂ  -----------------------------------------------------------------------------------------------Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  -- end functions --Â  -----------------------------------------------------------------------------------------------Â  -----------------------------------------------------------------------------------------------Â  -----------------------------------------------------------------------------------------------Â  -----------------------------------------------------------------------------------------------Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  -- start code --Â  -----------------------------------------------------------------------------------------------Â  -------------------------------------- Process mod --------------------------------------------Â  -----------------------------------------------------------------------------------------------Â  Â  -------------------------------------------------------------------------------------------------------Â  -------------------------------------------------------------------------------------------------------Â  --------------------------******** START MSG CHECKS ********-------------------------------------------Â  -------------------------------------------------------------------------------------------------------Â  -------------------------------------------------------------------------------------------------------if is_banned(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â  chat_kick(msg.chat_id_, msg.sender_user_id_)Â Â Â  return endif is_muted(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â  return endif is_gbanned(msg.sender_user_id_) thenÂ Â Â Â Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â  chat_kick(msg.chat_id_, msg.sender_user_id_)Â Â Â Â  return endÂ if database:get('bot:muteall'..msg.chat_id_) and not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â  return endÂ Â Â  database:incr('user:msgs'..msg.chat_id_..':'..msg.sender_user_id_)Â database:incr('group:msgs'..msg.chat_id_)if msg.content_.ID == "MessagePinMessage" thenÂ  if database:get('pinnedmsg'..msg.chat_id_) and database:get('bot:pin:mute'..msg.chat_id_) thenÂ Â  send(msg.chat_id_, msg.id_, 1, 'Ø´Ù…Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§ÛŒÙ† Ú©Ø§Ø± Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯...\nÙ…Ù† Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ Ø±Ø§ Ø¢Ù†Ù¾ÛŒÙ† Ùˆ Ø¯Ø± ØµÙˆØ±Øª Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø¨ÙˆØ¯Ù† Ù¾ÛŒØ§Ù… Ù‚Ø¨Ù„ Ø±Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù¾ÛŒÙ† Ù…ÛŒÚ©Ù†Ù…...\nØ¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ Ø¯Ø± Ø±Ø¨Ø§Øª Ù…Ù‚Ø§Ù…ÛŒ Ø¯Ø§Ø±ÛŒØ¯ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ± /pin Ù¾ÛŒØ§Ù… Ø¬Ø¯ÛŒØ¯ Ø±Ùˆ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙ† Ø´Ø¯Ù† ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯!', 1, 'md')Â Â  unpinmsg(msg.chat_id_)Â Â  local pin_id = database:get('pinnedmsg'..msg.chat_id_)Â Â Â Â Â Â Â Â  pin(msg.chat_id_,pin_id,0)Â Â  endendif database:get('bot:viewget'..msg.sender_user_id_) then Â Â Â  if not msg.forward_info_ thenÂ Â send(msg.chat_id_, msg.id_, 1, '*Error*\n`Please send this command again and forward your post(from channel)`', 1, 'md')Â Â database:del('bot:viewget'..msg.sender_user_id_)Â elseÂ Â send(msg.chat_id_, msg.id_, 1, 'Your Post Views:\n> '..msg.views_..' View!', 1, 'md')Â Â Â Â Â Â Â  database:del('bot:viewget'..msg.sender_user_id_)Â endendif msg_type == 'MSG:Photo' thenÂ Â  --vardump(msg)Â if not is_mod(msg.sender_user_id_, msg.chat_id_) thenif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â Â Â  if database:get('bot:photo:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  return Â Â  endÂ Â  if caption_text thenÂ Â Â Â Â  Â Â  if caption_text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]") or caption_text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]") thenÂ Â  if database:get('bot:links:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("@") or msg.content_.entities_[0].ID and msg.content_.entities_[0].ID == "MessageEntityMentionName" thenÂ Â  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("#") thenÂ Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[Hh][Tt][Tt][Pp][Ss]://") or caption_text:match("[Hh][Tt][Tt][Pp]://") or caption_text:match(".[Ii][Rr]") or caption_text:match(".[Cc][Oo][Mm]") or caption_text:match(".[Oo][Rr][Gg]") or caption_text:match(".[Ii][Nn][Ff][Oo]") or caption_text:match("[Ww][Ww][Ww].") or caption_text:match(".[Tt][Kk]") thenÂ Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[\216-\219][\128-\191]") thenÂ Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[ASDFGHJKLQWERTYUIOPZXCVBNMasdfghjklqwertyuiopzxcvbnm]") thenÂ Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â  endÂ  elseif msg_type == 'MSG:Inline' thenÂ Â  if not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â  if database:get('bot:inline:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  return Â Â  endÂ Â  endÂ  elseif msg_type == 'MSG:Sticker' thenÂ Â  if not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ  if database:get('bot:sticker:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  return Â Â  endÂ Â  endelseif msg_type == 'MSG:NewUserLink' thenÂ  if database:get('bot:tgservice:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  return Â Â  endÂ Â  function get_welcome(extra,result,success)Â Â Â  if database:get('welcome:'..msg.chat_id_) thenÂ Â Â Â Â Â Â  text = database:get('welcome:'..msg.chat_id_)Â Â Â  elseÂ Â Â Â Â Â Â  text = '*Hi {firstname} ðŸ˜ƒ*'Â Â Â  endÂ Â Â  local text = text:gsub('{firstname}',(result.first_name_ or ''))Â Â Â  local text = text:gsub('{lastname}',(result.last_name_ or ''))Â Â Â  local text = text:gsub('{username}',(result.username_ or ''))Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â  endÂ Â  if database:get("bot:welcome"..msg.chat_id_) thenÂ Â Â Â Â Â Â  getUser(msg.sender_user_id_,get_welcome)Â Â Â Â Â  endelseif msg_type == 'MSG:NewUserAdd' thenÂ  if database:get('bot:tgservice:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  return Â Â  endÂ Â Â Â Â  --vardump(msg)Â Â  if msg.content_.members_[0].username_ and msg.content_.members_[0].username_:match("[Bb][Oo][Tt]$") thenÂ Â Â Â Â  if database:get('bot:bots:mute'..msg.chat_id_) and not is_mod(msg.content_.members_[0].id_, msg.chat_id_) thenÂ Â  chat_kick(msg.chat_id_, msg.content_.members_[0].id_)Â Â  return falseÂ Â  endÂ Â  endÂ Â  if is_banned(msg.content_.members_[0].id_, msg.chat_id_) thenÂ Â  chat_kick(msg.chat_id_, msg.content_.members_[0].id_)Â Â  return falseÂ Â  endÂ Â  if database:get("bot:welcome"..msg.chat_id_) thenÂ Â Â  if database:get('welcome:'..msg.chat_id_) thenÂ Â Â Â Â Â Â  text = database:get('welcome:'..msg.chat_id_)Â Â Â  elseÂ Â Â Â Â Â Â  text = '*Hi {firstname} ðŸ˜ƒ*'Â Â Â  endÂ Â Â  local text = text:gsub('{firstname}',(msg.content_.members_[0].first_name_ or ''))Â Â Â  local text = text:gsub('{lastname}',(msg.content_.members_[0].last_name_ or ''))Â Â Â  local text = text:gsub('{username}',('@'..msg.content_.members_[0].username_ or ''))Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â  endelseif msg_type == 'MSG:Contact' thenÂ if not is_mod(msg.sender_user_id_, msg.chat_id_) thenif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ  if database:get('bot:contact:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  return Â Â  endÂ Â  endelseif msg_type == 'MSG:Audio' thenÂ if not is_mod(msg.sender_user_id_, msg.chat_id_) thenif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ  if database:get('bot:music:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  return Â Â  endÂ Â  if caption_text thenÂ Â Â Â Â  Â Â  if caption_text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]") or caption_text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]") thenÂ Â  if database:get('bot:links:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ if caption_text:match("@") or msg.content_.entities_[0].ID == "MessageEntityMentionName" thenÂ Â  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ  Â if caption_text:match("#") thenÂ Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("[Hh][Tt][Tt][Pp][Ss]://") or caption_text:match("[Hh][Tt][Tt][Pp]://") or caption_text:match(".[Ii][Rr]") or caption_text:match(".[Cc][Oo][Mm]") or caption_text:match(".[Oo][Rr][Gg]") or caption_text:match(".[Ii][Nn][Ff][Oo]") or caption_text:match("[Ww][Ww][Ww].") or caption_text:match(".[Tt][Kk]") thenÂ Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â Â Â  if caption_text:match("[\216-\219][\128-\191]") thenÂ Â Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[ASDFGHJKLQWERTYUIOPZXCVBNMasdfghjklqwertyuiopzxcvbnm]") thenÂ Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â  endelseif msg_type == 'MSG:Voice' thenÂ if not is_mod(msg.sender_user_id_, msg.chat_id_) thenif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ  if database:get('bot:voice:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  returnÂ  Â Â  endÂ Â  if caption_text thenÂ Â Â Â Â  Â  if caption_text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]") or caption_text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]") thenÂ Â  if database:get('bot:links:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ  if caption_text:match("@") thenÂ  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("#") thenÂ Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ if caption_text:match("[Hh][Tt][Tt][Pp][Ss]://") or caption_text:match("[Hh][Tt][Tt][Pp]://") or caption_text:match(".[Ii][Rr]") or caption_text:match(".[Cc][Oo][Mm]") or caption_text:match(".[Oo][Rr][Gg]") or caption_text:match(".[Ii][Nn][Ff][Oo]") or caption_text:match("[Ww][Ww][Ww].") or caption_text:match(".[Tt][Kk]") thenÂ Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â  if caption_text:match("[\216-\219][\128-\191]") thenÂ Â Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[ASDFGHJKLQWERTYUIOPZXCVBNMasdfghjklqwertyuiopzxcvbnm]") thenÂ Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â  endelseif msg_type == 'MSG:Location' thenÂ if not is_mod(msg.sender_user_id_, msg.chat_id_) thenif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ  if database:get('bot:location:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  returnÂ  Â Â  endÂ Â  if caption_text thenÂ Â Â Â Â  Â Â  if caption_text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]") or caption_text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]") thenÂ Â  if database:get('bot:links:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("@") or msg.content_.entities_[0].ID and msg.content_.entities_[0].ID == "MessageEntityMentionName" thenÂ Â  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("#") thenÂ Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("[Hh][Tt][Tt][Pp][Ss]://") or caption_text:match("[Hh][Tt][Tt][Pp]://") or caption_text:match(".[Ii][Rr]") or caption_text:match(".[Cc][Oo][Mm]") or caption_text:match(".[Oo][Rr][Gg]") or caption_text:match(".[Ii][Nn][Ff][Oo]") or caption_text:match("[Ww][Ww][Ww].") or caption_text:match(".[Tt][Kk]") thenÂ Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("[\216-\219][\128-\191]") thenÂ Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[ASDFGHJKLQWERTYUIOPZXCVBNMasdfghjklqwertyuiopzxcvbnm]") thenÂ Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â  endelseif msg_type == 'MSG:Video' thenÂ if not is_mod(msg.sender_user_id_, msg.chat_id_) thenif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ  if database:get('bot:video:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  returnÂ  Â Â  endÂ Â  if caption_text thenÂ Â Â Â Â  Â  if caption_text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]") or caption_text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]") thenÂ Â  if database:get('bot:links:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("@") or msg.content_.entities_[0].ID and msg.content_.entities_[0].ID == "MessageEntityMentionName" thenÂ Â  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("#") thenÂ Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("[Hh][Tt][Tt][Pp][Ss]://") or caption_text:match("[Hh][Tt][Tt][Pp]://") or caption_text:match(".[Ii][Rr]") or caption_text:match(".[Cc][Oo][Mm]") or caption_text:match(".[Oo][Rr][Gg]") or caption_text:match(".[Ii][Nn][Ff][Oo]") or caption_text:match("[Ww][Ww][Ww].") or caption_text:match(".[Tt][Kk]") thenÂ Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("[\216-\219][\128-\191]") thenÂ Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[ASDFGHJKLQWERTYUIOPZXCVBNMasdfghjklqwertyuiopzxcvbnm]") thenÂ Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â  endelseif msg_type == 'MSG:Gif' thenÂ if not is_mod(msg.sender_user_id_, msg.chat_id_) thenif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ  if database:get('bot:gifs:mute'..msg.chat_id_) and not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â  local msgs = {[0] = id}Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â Â Â Â Â Â Â Â  returnÂ  Â Â  endÂ Â  if caption_text thenÂ Â  Â Â  if caption_text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]") or caption_text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]") thenÂ Â  if database:get('bot:links:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("@") or msg.content_.entities_[0].ID and msg.content_.entities_[0].ID == "MessageEntityMentionName" thenÂ Â  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("#") thenÂ Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ if caption_text:match("[Hh][Tt][Tt][Pp][Ss]://") or caption_text:match("[Hh][Tt][Tt][Pp]://") or caption_text:match(".[Ii][Rr]") or caption_text:match(".[Cc][Oo][Mm]") or caption_text:match(".[Oo][Rr][Gg]") or caption_text:match(".[Ii][Nn][Ff][Oo]") or caption_text:match("[Ww][Ww][Ww].") or caption_text:match(".[Tt][Kk]") thenÂ Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if caption_text:match("[\216-\219][\128-\191]") thenÂ Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  if caption_text:match("[ASDFGHJKLQWERTYUIOPZXCVBNMasdfghjklqwertyuiopzxcvbnm]") thenÂ Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â Â  endelseif msg_type == 'MSG:Text' thenÂ --vardump(msg)Â Â Â  if database:get("bot:group:link"..msg.chat_id_) == 'Waiting For Link!\nPls Send Group Link.\n\nJoin My Channel > @Black_Ch' and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â  if text:match("(https://telegram.me/joinchat/%S+)") thenÂ Â  local glink = text:match("(https://telegram.me/joinchat/%S+)")Â Â Â Â Â  local hash = "bot:group:link"..msg.chat_id_Â Â Â Â Â Â Â Â Â Â Â Â Â Â  database:set(hash,glink)Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*New link Set!*', 1, 'md')Â Â Â Â  send(msg.chat_id_, 0, 1, '<b>New Group link:</b>\n'..glink, 1, 'html')Â Â Â Â Â  endÂ Â  endÂ Â Â  function check_username(extra,result,success)Â  --vardump(result)Â local username = (result.username_ or '')Â local svuser = 'user:'..result.id_Â if username thenÂ Â Â Â Â  database:hset(svuser, 'username', username)Â Â Â  endÂ if username and username:match("[Bb][Oo][Tt]$") thenÂ Â Â Â Â  if database:get('bot:bots:mute'..msg.chat_id_) and not is_mod(result.id_, msg.chat_id_) thenÂ Â  chat_kick(msg.chat_id_, result.id_)Â Â  return falseÂ Â  endÂ Â  endÂ Â  endÂ Â Â  getUser(msg.sender_user_id_,check_username)Â Â  database:set('bot:editid'.. msg.id_,msg.content_.text_)Â Â  if not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ if text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]") or text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]") thenÂ Â Â Â  if database:get('bot:links:mute'..msg.chat_id_) thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ if text thenÂ Â Â Â  if database:get('bot:text:mute'..msg.chat_id_) thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endif msg.forward_info_ thenif database:get('bot:forward:mute'..msg.chat_id_) thenÂ if msg.forward_info_.ID == "MessageForwardedFromUser" or msg.forward_info_.ID == "MessageForwardedPost" thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  endÂ Â  if text:match("@") or msg.content_.entities_[0] and msg.content_.entities_[0].ID == "MessageEntityMentionName" thenÂ Â  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if text:match("#") thenÂ Â Â Â Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if text:match("[Hh][Tt][Tt][Pp][Ss]://") or text:match("[Hh][Tt][Tt][Pp]://") or text:match(".[Ii][Rr]") or text:match(".[Cc][Oo][Mm]") or text:match(".[Oo][Rr][Gg]") or text:match(".[Ii][Nn][Ff][Oo]") or text:match("[Ww][Ww][Ww].") or text:match(".[Tt][Kk]") thenÂ Â Â Â Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â if text:match("[\216-\219][\128-\191]") thenÂ Â Â Â Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â endÂ Â  endÂ Â  Â Â  if text:match("[ASDFGHJKLQWERTYUIOPZXCVBNMasdfghjklqwertyuiopzxcvbnm]") thenÂ Â Â Â Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â Â  local chat = msg.chat_id_Â Â Â Â Â Â Â  delete_msg(chat,msgs)Â Â  endÂ Â Â Â  endÂ Â Â  endÂ Â  endÂ  -------------------------------------------------------------------------------------------------------Â  -------------------------------------------------------------------------------------------------------Â  -------------------------------------------------------------------------------------------------------Â  ---------------------------******** END MSG CHECKS ********--------------------------------------------Â  -------------------------------------------------------------------------------------------------------Â  -------------------------------------------------------------------------------------------------------Â  if database:get('bot:cmds'..msg.chat_id_) and not is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ  return Â  elseÂ Â Â  ------------------------------------ With Pattern -------------------------------------------Â if text:match("^[#!/]ping$") thenÂ Â Â  send(msg.chat_id_, msg.id_, 1, '_Pong_', 1, 'md')Â endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[!/#]leave$") and is_admin(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â  chat_leave(msg.chat_id_, bot_id)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]promote$") and is_owner(msg.sender_user_id_, msg.chat_id_) and msg.reply_to_message_id_ thenÂ function promote_by_reply(extra, result, success)Â local hash = 'bot:mods:'..msg.chat_id_Â if database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is Already moderator._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:sadd(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _promoted as moderator._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,promote_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]promote @(.*)$") and is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](promote) @(.*)$")} Â function promote_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:sadd('bot:mods:'..msg.chat_id_, result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>promoted as moderator.!</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],promote_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]promote (%d+)$") and is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](promote) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:sadd('bot:mods:'..msg.chat_id_, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _promoted as moderator._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]demote$") and is_owner(msg.sender_user_id_, msg.chat_id_) and msg.reply_to_message_id_ thenÂ function demote_by_reply(extra, result, success)Â local hash = 'bot:mods:'..msg.chat_id_Â if not database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is not Promoted._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:srem(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Demoted._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,demote_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]demote @(.*)$") and is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ local hash = 'bot:mods:'..msg.chat_id_Â local ap = {string.match(text, "^[#/!](demote) @(.*)$")} Â function demote_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:srem(hash, result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>Demoted</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],demote_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]demote (%d+)$") and is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ local hash = 'bot:mods:'..msg.chat_id_Â local ap = {string.match(text, "^[#/!](demote) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:srem(hash, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Demoted._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]ban$") and is_mod(msg.sender_user_id_, msg.chat_id_) and msg.reply_to_message_id_ thenÂ function ban_by_reply(extra, result, success)Â local hash = 'bot:banned:'..msg.chat_id_Â if is_mod(result.sender_user_id_, result.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*You Can,t [Kick/Ban] Moderators!!*', 1, 'md')Â Â Â  elseÂ Â Â  if database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is Already Banned._', 1, 'md')Â Â  chat_kick(result.chat_id_, result.sender_user_id_)Â elseÂ Â Â Â Â Â Â Â  database:sadd(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Banned._', 1, 'md')Â Â  chat_kick(result.chat_id_, result.sender_user_id_)Â endÂ Â Â  endÂ endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,ban_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]ban @(.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](ban) @(.*)$")} Â function ban_by_username(extra, result, success)Â if result.id_ thenÂ if is_mod(result.id_, msg.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*You Can,t [Kick/Ban] Moderators!!*', 1, 'md')Â Â Â  elseÂ Â Â Â Â Â Â Â  database:sadd('bot:banned:'..msg.chat_id_, result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>Banned.!</b>'Â Â  chat_kick(msg.chat_id_, result.id_)Â endÂ Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],ban_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]ban (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](ban) (%d+)$")}Â if is_mod(ap[2], msg.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*You Can,t [Kick/Ban] Moderators!!*', 1, 'md')Â Â Â  elseÂ Â Â Â Â Â Â Â  database:sadd('bot:banned:'..msg.chat_id_, ap[2])Â Â  chat_kick(msg.chat_id_, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Banned._', 1, 'md')Â endÂ Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]unban$") and is_mod(msg.sender_user_id_, msg.chat_id_) and msg.reply_to_message_id_ thenÂ function unban_by_reply(extra, result, success)Â local hash = 'bot:banned:'..msg.chat_id_Â if not database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is not Banned._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:srem(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Unbanned._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,unban_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]unban @(.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](unban) @(.*)$")} Â function unban_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:srem('bot:banned:'..msg.chat_id_, result.id_)Â Â Â Â Â Â Â Â Â Â Â  text = '<b>User </b><code>'..result.id_..'</code> <b>Unbanned.!</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  text = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],unban_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]unban (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](unban) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:srem('bot:banned:'..msg.chat_id_, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Unbanned._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]muteuser$") and is_mod(msg.sender_user_id_, msg.chat_id_) and msg.reply_to_message_id_ thenÂ function mute_by_reply(extra, result, success)Â local hash = 'bot:muted:'..msg.chat_id_Â if is_mod(result.sender_user_id_, result.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*You Can,t [Mute] Moderators!!*', 1, 'md')Â Â Â  elseÂ Â Â  if database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is Already Muted._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:sadd(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Muted._', 1, 'md')Â endÂ Â Â  endÂ endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,mute_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]muteuser @(.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](muteuser) @(.*)$")} Â function mute_by_username(extra, result, success)Â if result.id_ thenÂ if is_mod(result.id_, msg.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*You Can,t [Mute] Moderators!!*', 1, 'md')Â Â Â  elseÂ Â Â Â Â Â Â Â  database:sadd('bot:muted:'..msg.chat_id_, result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>Muted.!</b>'Â Â  chat_kick(msg.chat_id_, result.id_)Â endÂ Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],mute_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]muteuser (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](muteuser) (%d+)$")}Â if is_mod(ap[2], msg.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*You Can,t [Mute] Moderators!!*', 1, 'md')Â Â Â  elseÂ Â Â Â Â Â Â Â  database:sadd('bot:muted:'..msg.chat_id_, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Muted._', 1, 'md')Â endÂ Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]unmuteuser$") and is_mod(msg.sender_user_id_, msg.chat_id_) and msg.reply_to_message_id_ thenÂ function unmute_by_reply(extra, result, success)Â local hash = 'bot:muted:'..msg.chat_id_Â if not database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is not Muted._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:srem(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Unmuted._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,unmute_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]unmuteuser @(.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](unmuteuser) @(.*)$")} Â function unmute_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:srem('bot:muted:'..msg.chat_id_, result.id_)Â Â Â Â Â Â Â Â Â Â Â  text = '<b>User </b><code>'..result.id_..'</code> <b>Unmuted.!</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  text = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],unmute_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]unmuteuser (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](unmuteuser) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:srem('bot:muted:'..msg.chat_id_, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Unmuted._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]setowner$") and is_admin(msg.sender_user_id_) and msg.reply_to_message_id_ thenÂ function setowner_by_reply(extra, result, success)Â local hash = 'bot:owners:'..msg.chat_id_Â if database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is Already Owner._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:sadd(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Promoted as Group Owner._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,setowner_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]setowner @(.*)$") and is_admin(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](setowner) @(.*)$")} Â function setowner_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:sadd('bot:owners:'..msg.chat_id_, result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>Promoted as Group Owner.!</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],setowner_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]setowner (%d+)$") and is_admin(msg.sender_user_id_, msg.chat_id_) thenÂ local ap = {string.match(text, "^[#/!](setowner) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:sadd('bot:owners:'..msg.chat_id_, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Promoted as Group Owner._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]demowner$") and is_admin(msg.sender_user_id_) and msg.reply_to_message_id_ thenÂ function deowner_by_reply(extra, result, success)Â local hash = 'bot:owners:'..msg.chat_id_Â if not database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is not Owner._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:srem(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Removed from ownerlist._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,deowner_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]demowner @(.*)$") and is_admin(msg.sender_user_id_, msg.chat_id_) thenÂ local hash = 'bot:owners:'..msg.chat_id_Â local ap = {string.match(text, "^[#/!](demowner) @(.*)$")} Â function remowner_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:srem(hash, result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>Removed from ownerlist</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],remowner_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]demowner (%d+)$") and is_admin(msg.sender_user_id_, msg.chat_id_) thenÂ local hash = 'bot:owners:'..msg.chat_id_Â local ap = {string.match(text, "^[#/!](demowner) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:srem(hash, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Removed from ownerlist._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]addadmin$") and is_sudo(msg) and msg.reply_to_message_id_ thenÂ function addadmin_by_reply(extra, result, success)Â local hash = 'bot:admins:'Â if database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is Already Admin._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:sadd(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Added to BlackPlus admins._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,addadmin_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]addadmin @(.*)$") and is_sudo(msg) thenÂ local ap = {string.match(text, "^[#/!](addadmin) @(.*)$")} Â function addadmin_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:sadd('bot:admins:', result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>Added to BlackPlus admins.!</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],addadmin_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]addadmin (%d+)$") and is_sudo(msg) thenÂ local ap = {string.match(text, "^[#/!](addadmin) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:sadd('bot:admins:', ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* _Added to BlackPlus admins._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]remadmin$") and is_sudo(msg) and msg.reply_to_message_id_ thenÂ function deadmin_by_reply(extra, result, success)Â local hash = 'bot:admins:'Â if not database:sismember(hash, result.sender_user_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _is not Admin._', 1, 'md')Â elseÂ Â Â Â Â Â Â Â  database:srem(hash, result.sender_user_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_User_ *'..result.sender_user_id_..'* _Removed from Blackplus Admins!._', 1, 'md')Â endÂ Â Â  endÂ Â Â Â Â Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,deadmin_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]remadmin @(.*)$") and is_sudo(msg) thenÂ local hash = 'bot:admins:'Â local ap = {string.match(text, "^[#/!](remadmin) @(.*)$")} Â function remadmin_by_username(extra, result, success)Â if result.id_ thenÂ Â Â Â Â Â Â Â  database:srem(hash, result.id_)Â Â Â Â Â Â Â Â Â Â Â  texts = '<b>User </b><code>'..result.id_..'</code> <b>Removed from Blackplus Admins!</b>'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'html')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],remadmin_by_username)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]remadmin (%d+)$") and is_sudo(msg) thenÂ local hash = 'bot:admins:'Â local ap = {string.match(text, "^[#/!](remadmin) (%d+)$")} Â Â Â Â Â Â Â Â Â  database:srem(hash, ap[2])Â send(msg.chat_id_, msg.id_, 1, '_User_ *'..ap[2]..'* Removed from Blackplus Admins!_', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]modlist$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â  local hash =Â  'bot:mods:'..msg.chat_id_Â local list = database:smembers(hash)Â local text = "<b>Mod List:</b>\n\n"Â for k,v in pairs(list) doÂ local user_info = database:hgetall('user:'..v)Â Â if user_info and user_info.username thenÂ Â Â local username = user_info.usernameÂ Â Â text = text..k.." - @"..username.." ["..v.."]\n"Â Â elseÂ Â Â text = text..k.." - "..v.."\n"Â Â endÂ endÂ if #list == 0 thenÂ Â Â Â Â Â  text = "Mod List is empty"Â Â Â  endÂ send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]mutelist$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â  local hash =Â  'bot:muted:'..msg.chat_id_Â local list = database:smembers(hash)Â local text = "<b>Mute List:</b>\n\n"Â for k,v in pairs(list) doÂ local user_info = database:hgetall('user:'..v)Â Â if user_info and user_info.username thenÂ Â Â local username = user_info.usernameÂ Â Â text = text..k.." - @"..username.." ["..v.."]\n"Â Â elseÂ Â Â text = text..k.." - "..v.."\n"Â Â endÂ endÂ if #list == 0 thenÂ Â Â Â Â Â  text = "MuteList is empty"Â Â Â  endÂ send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]owner$") or text:match("^[#!/]ownerlist$") and is_sudo(msg) thenÂ Â Â  local hash =Â  'bot:owners:'..msg.chat_id_Â local list = database:smembers(hash)Â local text = "<b>Owner List:</b>\n\n"Â for k,v in pairs(list) doÂ local user_info = database:hgetall('user:'..v)Â Â if user_info and user_info.username thenÂ Â Â local username = user_info.usernameÂ Â Â text = text..k.." - @"..username.." ["..v.."]\n"Â Â elseÂ Â Â text = text..k.." - "..v.."\n"Â Â endÂ endÂ if #list == 0 thenÂ Â Â Â Â Â  text = "Owner List is empty"Â Â Â  endÂ send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]banlist$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â  local hash =Â  'bot:banned:'..msg.chat_id_Â local list = database:smembers(hash)Â local text = "<b>Ban List:</b>\n\n"Â for k,v in pairs(list) doÂ local user_info = database:hgetall('user:'..v)Â Â if user_info and user_info.username thenÂ Â Â local username = user_info.usernameÂ Â Â text = text..k.." - @"..username.." ["..v.."]\n"Â Â elseÂ Â Â text = text..k.." - "..v.."\n"Â Â endÂ endÂ if #list == 0 thenÂ Â Â Â Â Â  text = "Ban List is empty"Â Â Â  endÂ send(msg.chat_id_, msg.id_, 1, text, 1, 'html')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]adminlist$") and is_sudo(msg) thenÂ Â Â  local hash =Â  'bot:admins:'Â local list = database:smembers(hash)Â local text = "BlackPlus Admins:\n\n"Â for k,v in pairs(list) doÂ local user_info = database:hgetall('user:'..v)Â Â if user_info and user_info.username thenÂ Â Â local username = user_info.usernameÂ Â Â text = text..k.." - @"..username.." ["..v.."]\n"Â Â elseÂ Â Â text = text..k.." - "..v.."\n"Â Â endÂ endÂ if #list == 0 thenÂ Â Â Â Â Â  text = "Bot Admins List is empty"Â Â Â  endÂ Â Â  send(msg.chat_id_, msg.id_, 1, '`'..text..'`', 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â Â Â  if text:match("^[#!/]id$") and msg.reply_to_message_id_ ~= 0 thenÂ Â Â Â Â  function id_by_reply(extra, result, success)Â Â  local user_msgs = database:get('user:msgs'..result.chat_id_..':'..result.sender_user_id_)Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, "*> User ID:* `"..result.sender_user_id_.."`\n*> Number of Msgs:* `"..user_msgs.."`", 1, 'md')Â Â Â Â Â Â Â  endÂ Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,id_by_reply)Â  endÂ  -----------------------------------------------------------------------------------------------Â Â Â  if text:match("^[#!/]id @(.*)$") thenÂ local ap = {string.match(text, "^[#/!](id) @(.*)$")} Â function id_by_username(extra, result, success)Â if result.id_ thenÂ if is_sudo(result) thenÂ Â  t = 'Sudo'Â Â Â Â Â  elseif is_admin(result.id_) thenÂ Â  t = 'Global Admin'Â Â Â Â Â  elseif is_owner(result.id_, msg.chat_id_) thenÂ Â  t = 'Group Owner'Â Â Â Â Â  elseif is_mod(result.id_, msg.chat_id_) thenÂ Â  t = 'Moderator'Â Â Â Â Â  elseÂ Â  t = 'Member'Â Â  endÂ Â Â Â Â Â Â Â Â Â Â  texts = '*> Username* : `@'..ap[2]..'`\n*> ID* : `('..result.id_..')`\n*> Rank* : `'..t..'`'Â Â Â Â Â Â Â Â Â Â Â  else Â Â Â Â Â Â Â Â Â Â Â  texts = '<code>User not found!</code>'Â Â Â  endÂ Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, texts, 1, 'md')Â Â Â  endÂ Â Â Â Â Â  resolve_username(ap[2],id_by_username)Â Â Â  endÂ Â Â  -----------------------------------------------------------------------------------------------Â  if text:match("^[#!/]kick$") and msg.reply_to_message_id_ and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â  function kick_reply(extra, result, success)Â if is_mod(result.sender_user_id_, result.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*You Can,t [Kick/Ban] Moderators!!*', 1, 'md')Â Â Â  elseÂ Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, 'User '..result.sender_user_id_..' Kicked.', 1, 'html')Â Â Â Â Â Â Â  chat_kick(result.chat_id_, result.sender_user_id_)Â Â Â Â Â Â Â  endÂ endÂ Â  getMessage(msg.chat_id_,msg.reply_to_message_id_,kick_reply)Â Â Â  endÂ Â Â  -----------------------------------------------------------------------------------------------Â  if text:match("^[#!/]inv$") and msg.reply_to_message_id_ and is_sudo(msg) thenÂ Â Â Â Â  function inv_reply(extra, result, success)Â Â Â Â Â Â Â Â Â Â  add_user(result.chat_id_, result.sender_user_id_, 5)Â Â Â Â Â Â Â  endÂ Â  getMessage(msg.chat_id_, msg.reply_to_message_id_,inv_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â Â Â  if text:match("^[#!/]id$") and msg.reply_to_message_id_ == 0Â  thenlocal function getpro(extra, result, success)local user_msgs = database:get('user:msgs'..msg.chat_id_..':'..msg.sender_user_id_)Â Â  if result.photos_[0] thenÂ Â Â Â Â Â Â Â Â Â Â  sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, result.photos_[0].sizes_[1].photo_.persistent_id_,'> Supergroup ID: '..msg.chat_id_..'\n> Your ID: '..msg.sender_user_id_..'\n> Number of your Msgs: '..user_msgs,msg.id_,msg.id_)Â Â  elseÂ Â Â Â Â  send(msg.chat_id_, msg.id_, 1, "You Have'nt Profile Photo!!\n\n> *Supergroup ID:* `"..msg.chat_id_.."`\n*> Your ID:* `"..msg.sender_user_id_.."`\n*> Number of your Msgs: *`"..user_msgs.."`", 1, 'md')Â Â  endÂ Â  endÂ Â  tdcli_function ({Â Â Â  ID = "GetUserProfilePhotos",Â Â Â  user_id_ = msg.sender_user_id_,Â Â Â  offset_ = 0,Â Â Â  limit_ = 1Â  }, getpro, nil)Â endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]lock (.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local lockpt = {string.match(text, "^[#/!](lock) (.*)$")} Â Â Â Â Â  if lockpt[2] == "edit" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Done*\n_Msg Edit locked for normal members._', 1, 'md')Â Â Â Â Â Â Â Â  database:set('editmsg'..msg.chat_id_,'delmsg')Â Â  endÂ Â  if lockpt[2] == "cmds" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Bot Commands Has Been Locked_\n*[Now All Members Can`t Use Normal Commands.]*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:cmds'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if lockpt[2] == "bots" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Bots Has been_ *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:bots:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if lockpt[2] == "flood" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Flood* has been *locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('anti-flood:'..msg.chat_id_)Â Â  endÂ Â  if lockpt[2] == "pin" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, "*Now Members can't pin a msg*", 1, 'md')Â Â Â Â Â  database:set('bot:pin:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]setflood (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local floodmax = {string.match(text, "^[#/!](setflood) (%d+)$")} Â if tonumber(floodmax[2]) < 2 thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Wrong number*,_range isÂ  [2-99999]_', 1, 'md')Â elseÂ Â Â  database:set('flood:max:'..msg.chat_id_,floodmax[2])Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Flood has been set to_ *'..floodmax[2]..'*', 1, 'md')Â endÂ endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]setfloodtime (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local floodt = {string.match(text, "^[#/!](setfloodtime) (%d+)$")} Â if tonumber(floodt[2]) < 2 thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Wrong number*,_range isÂ  [2-99999]_', 1, 'md')Â elseÂ Â Â  database:set('flood:time:'..msg.chat_id_,floodt[2])Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Flood has been set to_ *'..floodt[2]..'*', 1, 'md')Â endÂ endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]setlink$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Please Send Group Link Now!*', 1, 'md')Â Â Â Â Â Â Â Â  database:set("bot:group:link"..msg.chat_id_, 'Waiting For Link!\nPls Send Group Link.\n\nJoin My Channel > @Black_Ch')Â endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]link$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local link = database:get("bot:group:link"..msg.chat_id_)Â Â  if link thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '<b>Group link:</b>\n'..link, 1, 'html')Â Â  elseÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*There is not link set yet. Please add one by #setlink .*', 1, 'md')Â Â  endÂ Â endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]stats$") and is_admin(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â  local gps = database:scard("bot:groups")Â local users = database:scard("bot:userss")Â Â Â  local allmgs = database:get("bot:allmsgs")Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Stats*\n\n_> Groups: _ `'..gps..'`\n_> Users: _ `'..users..'`\n_> All msgs: _ `'..allmgs..'`', 1, 'md')Â endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]unlock (.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local unlockpt = {string.match(text, "^[#/!](unlock) (.*)$")} Â Â Â Â Â  if unlockpt[2] == "edit" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Done*\n_Msg Edit has been unlocked._', 1, 'md')Â Â Â Â Â Â Â Â  database:del('editmsg'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unlockpt[2] == "cmds" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Bot Commands Has Been Unlocked_\n*[Now All Members Can Use Normal Commands.]*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:cmds'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unlockpt[2] == "bots" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Bots Has been_ *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:bots:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unlockpt[2] == "flood" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Flood* has been *unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('anti-flood:'..msg.chat_id_,true)Â Â  endÂ Â  if unlockpt[2] == "pin" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, "*Now Members can pin a msg*", 1, 'md')Â Â Â Â Â  database:del('bot:pin:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â Â  endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]mute all (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local mutept = {string.match(text, "^[#!/]mute all (%d+)$")}Â Â Â Â  Â Â database:setex('bot:muteall'..msg.chat_id_, tonumber(mutept[1]), true)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Group muted for_ *'..mutept[1]..'* _seconds!_', 1, 'md')Â endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]mute (.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local mutept = {string.match(text, "^[#/!](mute) (.*)$")} Â Â Â Â Â  if mutept[2] == "all" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_Mute All has been_ *enabled*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:muteall'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "text" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Text Has been_ *Muted*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:text:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "inline" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Inline Has been_ *Muted*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:inline:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "photo" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Photo Has been_ *Muted*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:photo:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "video" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Video Has been_ *Muted*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:video:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "gifs" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Gifs Has been_ *Muted*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:gifs:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "music" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Music Has been_ *Muted*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:music:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "voice" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Voice Has been_ *Muted*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:voice:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "links" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Link* posting has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:links:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "location" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *location* posting has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:location:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "tag" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Tag/Mention* posting has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:tag:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "hashtag" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Hashtag* posting has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:hashtag:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "contact" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Contact* posting has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:contact:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "webpage" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Hashtag* posting has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:webpage:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "arabic" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Arabic/Persian* has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:arabic:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "english" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *English* has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:english:mute'..msg.chat_id_,true)Â Â Â Â Â  end Â Â  if mutept[2] == "sticker" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Sticker* posting has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:sticker:mute'..msg.chat_id_,true)Â Â Â Â Â  end Â Â  if mutept[2] == "service" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Joining Msgs* has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:tgservice:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ Â  if mutept[2] == "forward" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Forward* has been *Locked*', 1, 'md')Â Â Â Â Â Â Â Â  database:set('bot:forward:mute'..msg.chat_id_,true)Â Â Â Â Â  endÂ endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]unmute (.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local unmutept = {string.match(text, "^[#/!](unmute) (.*)$")} Â Â Â Â Â  if unmutept[2] == "all" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_Mute All has been_ *Disabled*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:muteall'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "text" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Text Has been_ *Unmuted*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:text:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "photo" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Photo Has been_ *Unmuted*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:photo:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "video" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Video Has been_ *Unmuted*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:video:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "inline" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> inline Has been_ *Unmuted*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:inline:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "gifs" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Gifs Has been_ *Unmuted*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:gifs:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "music" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Music Has been_ *Unmuted*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:music:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "voice" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Voice Has been_ *Unmuted*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:voice:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "links" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Link* posting has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:links:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "location" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *location* posting has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:location:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "tag" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Tag/Mention* posting has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:tag:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "hashtag" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Hashtag* posting has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:hashtag:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "contact" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Contact* posting has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:contact:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "webpage" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Hashtag* posting has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:webpage:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "arabic" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Arabic/Persian* has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:arabic:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "english" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *English* has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:english:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "service" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Joining Msgs* has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:tgservice:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "sticker" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Sticker* posting has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:sticker:mute'..msg.chat_id_)Â Â Â Â Â  endÂ Â  if unmutept[2] == "forward" thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '> *Forward* has been *Unlocked*', 1, 'md')Â Â Â Â Â Â Â Â  database:del('bot:forward:mute'..msg.chat_id_)Â Â Â Â Â  end Â endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]clean (.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local txt = {string.match(text, "^[#/!](clean) (.*)$")} Â Â Â Â Â Â  if txt[2] == 'banlist' thenÂ Â Â Â Â Â  database:del('bot:banned:'..msg.chat_id_)Â Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Banlist has been_ *Cleaned*', 1, 'md')Â Â Â Â Â Â  endÂ Â Â  if txt[2] == 'bots' thenÂ Â  local function g_bots(extra,result,success)Â Â Â Â Â  local bots = result.members_Â Â Â Â Â  for i=0 , #bots doÂ Â Â Â Â Â Â Â Â  chat_kick(msg.chat_id_,bots[i].user_id_)Â Â Â Â Â Â Â Â Â  endÂ Â Â Â Â  endÂ Â Â  channel_get_bots(msg.chat_id_,g_bots)Â Â Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> All bots_ *kicked!*', 1, 'md')Â endÂ Â Â  if txt[2] == 'modlist' thenÂ Â Â Â Â Â  database:del('bot:mods:'..msg.chat_id_)Â Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Modlist has been_ *Cleaned*', 1, 'md')Â Â Â Â Â Â  endÂ Â Â  if txt[2] == 'mutelist' thenÂ Â Â Â Â Â  database:del('bot:muted:'..msg.chat_id_)Â Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_> Mutelist has been_ *Cleaned*', 1, 'md')Â Â Â Â Â Â  endÂ Â Â  endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]settings$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ if database:get('bot:muteall'..msg.chat_id_) thenÂ mute_all = 'Lock'Â elseÂ mute_all = 'Unlock'Â endÂ ------------Â if database:get('bot:text:mute'..msg.chat_id_) thenÂ mute_text = 'Lock'Â elseÂ mute_text = 'Unlock'Â endÂ ------------Â if database:get('bot:photo:mute'..msg.chat_id_) thenÂ mute_photo = 'Lock'Â elseÂ mute_photo = 'Unlock'Â endÂ ------------Â if database:get('bot:video:mute'..msg.chat_id_) thenÂ mute_video = 'Lock'Â elseÂ mute_video = 'Unlock'Â endÂ ------------Â if database:get('bot:gifs:mute'..msg.chat_id_) thenÂ mute_gifs = 'Lock'Â elseÂ mute_gifs = 'Unlock'Â endÂ ------------Â if database:get('anti-flood:'..msg.chat_id_) thenÂ mute_flood = 'Unlock'Â elseÂ mute_flood = 'Lock'Â endÂ ------------Â if not database:get('flood:max:'..msg.chat_id_) thenÂ flood_m = 5Â elseÂ flood_m = database:get('flood:max:'..msg.chat_id_)Â endÂ ------------Â if not database:get('flood:time:'..msg.chat_id_) thenÂ flood_t = 3Â elseÂ flood_t = database:get('flood:time:'..msg.chat_id_)Â endÂ ------------Â if database:get('bot:music:mute'..msg.chat_id_) thenÂ mute_music = 'Lock'Â elseÂ mute_music = 'Unlock'Â endÂ ------------Â if database:get('bot:bots:mute'..msg.chat_id_) thenÂ mute_bots = 'Lock'Â elseÂ mute_bots = 'Unlock'Â endÂ ------------Â if database:get('bot:inline:mute'..msg.chat_id_) thenÂ mute_in = 'Lock'Â elseÂ mute_in = 'Unlock'Â endÂ ------------Â if database:get('bot:cmds'..msg.chat_id_) thenÂ mute_cmd = 'Disable'Â elseÂ mute_cmd = 'Enable'Â endÂ ------------Â if database:get('bot:voice:mute'..msg.chat_id_) thenÂ mute_voice = 'Lock'Â elseÂ mute_voice = 'Unlock'Â endÂ ------------Â if database:get('editmsg'..msg.chat_id_) thenÂ mute_edit = 'Lock'Â elseÂ mute_edit = 'Unlock'Â endÂ Â Â  ------------Â if database:get('bot:links:mute'..msg.chat_id_) thenÂ mute_links = 'Lock'Â elseÂ mute_links = 'Unlock'Â endÂ Â Â  ------------Â if database:get('bot:pin:mute'..msg.chat_id_) thenÂ lock_pin = 'Lock'Â elseÂ lock_pin = 'Unlock'Â end Â Â Â  ------------Â if database:get('bot:sticker:mute'..msg.chat_id_) thenÂ lock_sticker = 'Lock'Â elseÂ lock_sticker = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:tgservice:mute'..msg.chat_id_) thenÂ lock_tgservice = 'Lock'Â elseÂ lock_tgservice = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:webpage:mute'..msg.chat_id_) thenÂ lock_wp = 'Lock'Â elseÂ lock_wp = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:hashtag:mute'..msg.chat_id_) thenÂ lock_htag = 'Lock'Â elseÂ lock_htag = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:tag:mute'..msg.chat_id_) thenÂ lock_tag = 'Lock'Â elseÂ lock_tag = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:location:mute'..msg.chat_id_) thenÂ lock_location = 'Lock'Â elseÂ lock_location = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:contact:mute'..msg.chat_id_) thenÂ lock_contact = 'Lock'Â elseÂ lock_contact = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:english:mute'..msg.chat_id_) thenÂ lock_english = 'Lock'Â elseÂ lock_english = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:arabic:mute'..msg.chat_id_) thenÂ lock_arabic = 'Lock'Â elseÂ lock_arabic = 'Unlock'Â endÂ ------------Â Â Â  if database:get('bot:forward:mute'..msg.chat_id_) thenÂ lock_forward = 'Lock'Â elseÂ lock_forward = 'Unlock'Â endÂ ------------Â if database:get("bot:welcome"..msg.chat_id_) thenÂ send_welcome = 'Enable'Â elseÂ send_welcome = 'Disable'Â endÂ ------------Â local ex = database:ttl("bot:charge:"..msg.chat_id_)Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  if ex == -1 thenÂ Â Â Â exp_dat = 'Unlimited'Â Â Â Â elseÂ Â Â Â exp_dat = math.floor(ex / 86400) + 1Â Â Â Â Â Â  endÂ Â ------------Â local TXT = "*Group Settings:*\n\n"Â Â Â Â Â Â Â Â Â Â  .."*Welcome Msg* ~> `"..send_welcome.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Stickers* ~> `"..lock_sticker.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*TgServices* ~> `"..lock_tgservice.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Links* ~> `"..mute_links.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*WebPage* ~> `"..lock_wp.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Tag{@}/Mention* ~> `"..lock_tag.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Hashtag{#}* ~> `"..lock_htag.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Share Contact* ~> `"..lock_contact.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*English* ~> `"..lock_english.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Location* ~> `"..lock_location.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Bots* ~> `"..mute_bots.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Inline* ~> `"..mute_in.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Arabic/Persian* ~> `"..lock_arabic.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Forward* ~> `"..lock_forward.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Edit Msg* ~> `"..mute_edit.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Pin Msg* ~> `"..lock_pin.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Flood* ~> `"..mute_flood.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Flood Max* ~> `"..flood_m.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Flood Time* ~> `"..flood_t.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*______________________*\n"Â Â Â Â Â Â Â Â Â Â  .."*Mutes List:*\n\n"Â Â Â Â Â Â Â Â Â Â  .."*Mute all* ~> `"..mute_all.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Text* ~> `"..mute_text.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Photos* ~> `"..mute_photo.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Videos* ~> `"..mute_video.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Gifs* ~> `"..mute_gifs.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Musics* ~> `"..mute_music.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Voice Msgs* ~> `"..mute_voice.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*______________________*\n"Â Â Â Â Â Â Â Â Â Â  .."*Bot Commands* ~> `"..mute_cmd.."`\n"Â Â Â Â Â Â Â Â Â Â  .."*Group Language* ~> *EN*\n"Â Â Â Â Â Â Â Â Â Â  .."*Expire date* ~> `"..exp_dat.."`\n"Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, TXT, 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]echo (.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local txt = {string.match(text, "^[#/!](echo) (.*)$")} Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, txt[2], 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]setrules (.*)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ local txt = {string.match(text, "^[#/!](setrules) (.*)$")}Â database:set('bot:rules'..msg.chat_id_, txt[2])Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_Group rules upadted..._', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]rules$") thenÂ local rules = database:get('bot:rules'..msg.chat_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, rules, 1, nil)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]rename (.*)$") and is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ local txt = {string.match(text, "^[#/!](rename) (.*)$")} Â Â Â Â Â  changetitle(msg.chat_id_, txt[2])Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_Group name updated!_', 1, 'md')Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]getme$") thenÂ function guser_by_reply(extra, result, success)Â Â Â Â Â Â Â Â  --vardump(result)Â Â Â  endÂ Â Â Â Â  getUser(msg.sender_user_id_,guser_by_reply)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]setphoto$") and is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_Please send a photo noew!_', 1, 'md')Â Â  database:set('bot:setphoto'..msg.chat_id_..':'..msg.sender_user_id_,true)Â Â Â  endÂ -----------------------------------------------------------------------------------------------Â -----------------------------------------------------------------------------------------------Â if text:match("^[#!/]reload$") and is_sudo(msg) thenÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Reloaded*', 1, 'md') -- wtfÂ Â Â  endÂ -----------------------------------------------------------------------------------------------Â  Â if text:match("^[#!/]del (%d+)$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â  local delnumb = {string.match(text, "^[#/!](del) (%d+)$")} Â Â Â  if tonumber(delnumb[2]) > 100 thenÂ Â Â send(msg.chat_id_, msg.id_, 1, 'Error\nuse /del [1-100]', 1, 'md')elseÂ Â Â Â Â Â  local id = msg.id_ - 1Â Â Â Â Â Â Â  for i= id - delnumb[2] , id do Â Â Â Â Â Â Â  delete_msg(msg.chat_id_,{[0] = i})Â Â Â Â Â Â Â  endÂ Â Â send(msg.chat_id_, msg.id_, 1, '> '..delnumb[2]..' Last Msgs Has Been Removed.', 1, 'md')Â Â Â  endÂ endÂ -----------------------------------------------------------------------------------------------Â Â  if text:match("^[#!/]me$") thenÂ Â Â Â Â  if is_sudo(msg) thenÂ Â  t = '*Sudo*'Â Â Â Â Â  elseif is_admin(msg.sender_user_id_) thenÂ Â  t = '*Global Admin*'Â Â Â Â Â  elseif is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ Â  t = '*Group Owner*'Â Â Â Â Â  elseif is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â  t = '*Moderator*'Â Â Â Â Â  elseÂ Â  t = '*Member*'Â Â  endÂ Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '_Your ID >_ *'..msg.sender_user_id_..'*\n_Your Rank is:_ '..t, 1, 'md')Â Â Â  endÂ Â  -----------------------------------------------------------------------------------------------Â Â  if text:match("^[#!/]pin$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â  local id = msg.id_Â Â Â Â Â Â Â  local msgs = {[0] = id}Â Â Â Â Â Â  pin(msg.chat_id_,msg.reply_to_message_id_,0)Â Â Â  database:set('pinnedmsg'..msg.chat_id_,msg.reply_to_message_id_)Â Â  endÂ Â  -----------------------------------------------------------------------------------------------Â Â  if text:match("^[#!/]unpin$") and is_owner(msg.sender_user_id_, msg.chat_id_) thenÂ Â Â Â Â Â Â Â  unpinmsg(msg.chat_id_)Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, 'Pinned Msg han been unpinned!', 1, 'md')Â Â  endÂ Â  -----------------------------------------------------------------------------------------------Â Â  if text:match("^[#!/]help$") and is_mod(msg.sender_user_id_, msg.chat_id_) thenÂ Â  Â Â  local text = [[*Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø±Ø¨Ø§ØªØ¨Ø±Ø§ÛŒ Ù‚ÙÙ„ Ú©Ø±Ø¯Ù†/mute [links/webpage/sticker/service/tag/hashtag/contact/english/arabic/forward/all/photo/video/gifs/music/voice/text]/lock [edit/pin]---------Ù†Ú©Ø§ØªÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ ÛŒ Ù‚ÙÙ„ Ù‡Ø§ÛŒ Ø¨Ø§Ù„Ø§Ø¨Ø±Ø§ÛŒ Ù…Ø«Ø§Ù„ Ø¯Ø±ØµÙˆØ±ØªÛŒÚ©Ù‡ Ù‚ØµØ¯ Ø¯Ø§Ø±ÛŒØ¯ Ø§Ø±Ø³Ø§Ù„ Ù„ÛŒÙ†Ú© Ù‚ÙÙ„ Ø´ÙˆØ¯ Ø§Ø² Ø¯Ø³ØªÙˆØ±/mute linksØ§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.Ù‡Ù†Ú¯Ø§Ù…ÛŒ Ú©Ù‡ Ø§Ø² Ø¯Ø³ØªÙˆØ± /lock edit Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ ÙˆÙ‚ØªÛŒ Ø§Ø¹Ø¶Ø§ÛŒ Ú¯Ø±ÙˆÙ‡ Ù¾ÛŒØ§Ù…ÛŒ Ø±Ø§ Ø§Ø¯ÛŒØª Ú©Ù†Ù†Ø¯ Ù¾ÛŒØ§Ù…Ø´Ø§Ù† Ù¾Ø§Ú© Ù…ÛŒØ´ÙˆØ°Ø¯Ø± ØµÙˆØ±ØªÛŒ Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒØ¯ Ø¨ÙÙ‡Ù…ÛŒØ¯ Ù…ØªÙ† Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø¯ÛŒØª Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ø¨ÙˆØ¯Ù‡ Ù…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø¯Ø³ØªÙˆØ± /show edit Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ú©Ø±Ø¯Ù† Ø¯Ø³ØªÙˆØ±/lock pinØ¨Ø§ÛŒØ¯ Ø§Ø¨ØªØ¯Ø§ Ù¾ÛŒØ§Ù… Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ø±Ø¯Ù‡ Ùˆ Ø³Ù¾Ø³ Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒ Ø¢Ù† Ù¾ÛŒØ§Ù… Ùˆ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ± /pinÙˆ Ø³Ù¾Ø³ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø³ØªÙˆØ± /lock pinÙ…ÛŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾ÛŒÙ† Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø±Ø§ Ø§Ø² Ø§Ø¯Ù…ÛŒÙ† Ù‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡ Ø¨Ú¯ÛŒØ±ÛŒØ¯ Ùˆ Ø¯Ø± ØµÙˆØ±Øª Ù¾ÛŒÙ† Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù…ÛŒ ØªÙˆØ³Ø· Ø§Ø¯Ù…ÛŒÙ† Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø±Ø¨Ø§Øª Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ Ø±Ø§ Ù¾ÛŒÙ† Ù…ÛŒÚ©Ù†Ø¯/unmute [links/webpage/sticker/service/tag/hashtag/contact/english/arabic/forward/all/photo/video/gifs/music/voice/text]/unlock [edit/pin]Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù‚ÙÙ„ Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø§Ù„Ø§/welcome onÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯ Ú¯ÙˆÛŒÛŒ/welcome offØºÛŒØ± ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯ Ú¯ÙˆÛŒÛŒ/get welcome Ù…ØªÙ† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±ØªÙ†Ø¸ÛŒÙ… Ú©Ø±Ø¯Ù† Ù…ØªÙ† Ø¯Ù„Ø®ÙˆØ§Ù‡ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…ØªÙ† Ø®ÙˆØ´Ø§Ù…Ø¯ Ú¯ÙˆÛŒÛŒØ¨Ø±Ø§ÛŒ Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ø§ÛŒØ¯ÛŒ Ùˆ Ø§Ø³Ù… Ø§Ø² Ù…Ø«Ø§Ù„ Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.#set welcome Salam {username} esmet {firstname}familit {lastname}/get welcomeØ­Ø°Ù Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯ Ú¯ÙˆÛŒÛŒ/del welcomeØ­Ø°Ù Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ø®ÙˆØ´Ø§Ù…Ø¯ Ú¯ÙˆÛŒÛŒ/ban [ÙÙ‚Ø· Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ]Ø§Ø®Ø±Ø§Ø¬ Ø¯Ø§ÛŒÙ…ÛŒ Ú©Ø§Ø±Ø¨Ø±/unban [ÙÙ‚Ø· Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ]Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Ù„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯ Ù…Ø­Ø±ÙˆÙ…/banlistÙ„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯ Ù…Ø­Ø±ÙˆÙ… Ø´Ø¯Ù‡/muteuser [ÙÙ‚Ø· Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ]Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯ Ù…ÛŒÙˆØª Ø´Ø¯Ù‡/unmuteuser [ÙÙ‚Ø· Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ]Ø­Ø°Ù Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯ Ù…ÛŒÙˆØª Ø´Ø¯Ù‡/mutelistÙ„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯ Ù…ÛŒÙˆØª Ø´Ø¯Ù‡/promote [ÙÙ‚Ø· Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ]Ø§Ø±ØªÙ‚Ø§ Ø¯Ø§Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±/demote [ÙÙ‚Ø· Ø¨Ø§ Ø±ÛŒÙ¾Ù„ÛŒ]Ø®Ù„Ø¹ Ù…Ù‚Ø§Ù… Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Ø¨Ø±/modlistÙ„ÛŒØ³Øª Ø§Ø¯Ù…ÛŒÙ† Ù‡Ø§ÛŒ Ø±Ø¨Ø§Øª Ø¯Ø± Ú¯Ø±ÙˆÙ‡/getpro [1-10]Ø¯Ø±ÛŒØ§ÙØª Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø´Ù…Ø§Ù…Ø«Ø§Ù„/getpro 2/setlinkØªÙ†Ø¸ÛŒÙ… Ù„ÛŒÙ†Ú© Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙˆÙ‡/setrules Ù‚ÙˆØ§Ù†ÛŒÙ†ØªÙ†Ø¸ÛŒÙ… Ù…ØªÙ† Ù‚ÙˆØ§Ù†ÛŒÙ† Ú¯Ø±ÙˆÙ‡/rulesØ¯Ø±ÛŒØ§ÙØª Ù‚ÙˆØ§Ù†ÛŒÙ†/settingsØ¯Ø±ÛŒØ§ÙØª ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ú¯Ø±ÙˆÙ‡/clean [banlist/mutelist/modlist]Ø­Ø°Ù Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª Ø§ÙØ±Ø§Ø¯ Ø¨Ù†/Ù…ÛŒÙˆØª/Ù¾Ø±ÙˆÙ…ÙˆØª Ø´Ø¯Ù‡/del Ø¹Ø¯Ø¯Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ± Ú¯Ø±ÙˆÙ‡Ù…Ø«Ø§Ù„/del 100Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† 100 Ù¾ÛŒØ§Ù… Ø¢Ø®Ø±Ø±Ø§Ù‡Ù†Ù…Ø§ Ø¨Ø²ÙˆØ¯ÛŒ Ú©Ø§Ù…Ù„ Ù…ÛŒØ´ÙˆØ¯!!!*]]Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, text, 1, 'md')Â Â  endÂ Â  -----------------------------------------------------------------------------------------------Â Â  if text:match("^[#!/]gview$") thenÂ Â Â Â Â Â Â  database:set('bot:viewget'..msg.sender_user_id_,true)Â Â Â Â Â Â Â  send(msg.chat_id_, msg.id_, 1, '*Please send a post now!*', 1, 'md')Â Â  endÂ  endÂ  -----------------------------------------------------------------------------------------------Â endÂ  -----------------------------------------------------------------------------------------------Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  -- end code --Â  -----------------------------------------------------------------------------------------------Â  elseif (data.ID == "UpdateChat") thenÂ Â Â  chat = data.chat_Â Â Â  chats[chat.id_] = chatÂ  elseif (data.ID == "UpdateOption" and data.name_ == "my_id") thenÂ Â Â  tdcli_function ({ID="GetChats", offset_order_="9223372036854775807", offset_chat_id_=0, limit_=20}, dl_cb, nil)Â Â Â  Â  endÂ  -----------------------------------------------------------------------------------------------end
